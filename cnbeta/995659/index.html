<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="referrer" content="never">
	<title>PHP 8 发布首个 Alpha 版本 - 罩妖塔</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="PHP 8 发布首个 Alpha 版本" />
<meta property="og:description" content="按照发布计划，PHP 8 将于今年 11 月 26 日发布，而原定于 6 月 18 日发布的第一个 Alpha 版本跳票到了今天发布。PHP 8 是一个新的主要版本，它引入了一些重大变更，以及许多新特性和性能改进，下边简单介绍一些亮点：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/n/cnbeta/995659/" />
<meta property="article:published_time" content="2020-06-26T02:16:10+08:00" />
<meta property="article:modified_time" content="2020-06-26T02:16:10+08:00" />

	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/n/css/style.css">
	
	<link rel="shortcut icon" href="/n/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/n" title="罩妖塔" rel="home">
				<div class="logo__title">罩妖塔</div>
				<div class="logo__tagline">师傅，别跑</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/n/cnbeta">
				
				<span class="menu__text">行业资讯</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PHP 8 发布首个 Alpha 版本</h1>
			<div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2020-06-26T02:16:10&#43;08:00">June 26, 2020</time></div></div>
		</header>
		<div class="content post__content clearfix">
			<p>按照发布计划，PHP 8 将于今年 11 月 26 日发布，而原定于 6 月 18 日发布的第一个 Alpha 版本跳票到了今天发布。PHP 8 是一个新的主要版本，它引入了一些重大变更，以及许多新特性和性能改进，下边简单介绍一些亮点：</p>
<p><img src="https://static.cnbetacdn.com/thumb/article/2020/0626/8b77f4a082deebc.png" alt="img:PHP 8 发布首个 Alpha 版本"></p>
<p><img src="https://oscimg.oschina.net/oscnet/up-45b53aa5ba319df1d0d8663d30b278dc46f.png" alt="img:PHP 8 发布首个 Alpha 版本"></p>
<p>下载地址：</p>
<p><a href="https://downloads.php.net/~pollita">https://downloads.php.net/~pollita</a></p>
<p>JIT，Just-In-Time，即时编译</p>
<p>最重大的特性非 JIT 莫属。该特性的研发历时多年，熬过了 PHP 5 与 7 大版本系列（PHP 6 项目流产），直到去年 3 月份才最终通过投票确认将进入 PHP 8。</p>
<p>JIT 是一种编译器策略，它将代码表述为一种中间状态，在运行时将其转换为依赖于体系结构的机器码，并即时执行。在 PHP 中，这意味着 JIT 将为 Zend VM 生成的指令视为中间表述，并以依赖于体系结构的机器码执行，也就是说托管代码的不再是 Zend VM，而是更为底层的 CPU。</p>
<p>虽然自 PHP 7.0 以来，通过优化核心数据结构 HashTable、强化 Zend VM 中某些操作码与持续改进 OPCache 的 Optimizer 组件等具体措施，PHP 性能得到了显著提升，但是实际上这些优化似乎已经走到极限了。现在 JIT 从底层着手，被认为是目前提升 PHP 性能的最佳出路。</p>
<p>关于引入 JIT 后的性能对比（以及 PHP 8 整体性能），可以参考一下本月 Phoronix 的基准测试（注：用的是 5 月底的源码构建版进行的测试）。</p>
<p>Union Types，联合类型</p>
<p>Union Types 支持接收多个不同类型的值，它是两种或多种类型的集合，使用时可以选择其一。包括 PHP 在内的开源生态的标准库中使用联合类型非常普遍，PHP 支持联合类型，将会允许将更多类型信息从 phpdoc 迁移至函数签名。可以说，泛型之后，联合类型是目前类型声明系统中最大的突破口。</p>
<p>Attributes，注解</p>
<p>这里的 Attributes 也就是其它语言中的 annotations（注解），它提供了一种向类添加元数据的方法，无需解析文档块。</p>
<p>新的 static 返回类型</p>
<p>虽然已经可以返回 self，但是考虑到 PHP 具有动态类型的性质，PHP 8 中支持 static 返回类型将更加高效，对于许多开发者来说应当非常有用。</p>
<p>WeakMap，弱映射</p>
<p>WeakMaps 允许创建从对象到任意值的映射（类似 SplObjectStorage），而不会阻止对用作 key 的对象进行垃圾回收。只要将对象添加到 WeakMap 中，GC 在触发条件时就可以将其占用内存回收。</p>
<p>PHP 7.4 中，实际上已经引入了对 WeakReference（弱引用）的支持。但是，原始的弱引用本身用途有限，而弱映射在实践中更为常用。由于没有提供注册销毁回调的功能，因此无法在 PHP 弱引用之上实现有效的弱映射。弱映射的一般用例是将数据与单个对象实例相关联，而不强迫它们保持活动状态，避免长时间运行的进程无谓地占用内存。</p>
<p>关于 WeakMap/WeakReference，可以参考这一篇的 WeakRef 部分，虽然讲的是 JS，但原理是相通的：</p>
<p><a href="https://www.oschina.net/news/106670/what-s-new-in-javascript-google-io-2019">https://www.oschina.net/news/106670/what-s-new-in-javascript-google-io-2019</a></p>
<p>更多的相关特性可以查看：</p>
<p><a href="https://www.php.net/index.php#id2020-06-25-1">https://www.php.net/index.php#id2020-06-25-1</a></p>
<p><a href="https://wiki.php.net/rfc">https://wiki.php.net/rfc</a></p>
<p><a href="https://github.com/php/php-src/blob/master/UPGRADING">https://github.com/php/php-src/blob/master/UPGRADING</a></p>
<p><a href="https://derickrethans.nl/archive.html">https://derickrethans.nl/archive.html</a>（Derick Rethans 的博客，他是 PHP 核心贡献者，也是 PHP 7.4 的 release manager）</p>
<p>此外还注意到几个处于投票阶段的特性（也就是可能比较快会并入某个版本中的），像 match expression（匹配表达式）与使用 @@ 或 #[] 替代 &laquo;&raquo; 的提案都是比较值得关注的：</p>
<p><img src="https://oscimg.oschina.net/oscnet/up-fe1bcc1146867fc202ad93e1b18c4feae98.png" alt="img:PHP 8 发布首个 Alpha 版本"></p>
<p>需要注意的是，PHP 8 是一个重大更新版本，带了一些重大变更，所以最好查看 UPGRADING 文档的相关事项。不过实际上，其中许多重大变更在之前的 7.* 版本中已经引入，因此，如果你一直保持最新版本，那么升级到 PHP 8 也影响不大。</p>
<p>另外，PHP 8 中 JIT 主要贡献者鸟哥 @Laruence 在此版本发布前也发表了相关文章，讲述 JIT 的研发历程，感兴趣可以瞧瞧：写在PHP8发布之前的话。</p>
		</div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/n/cnbeta/995649/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《赛博朋克2077》新中文预告片&#34;差事&#34;及试玩视频分享</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/n/cnbeta/995651/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《赛博朋克2077》全新原创动画“EDGERUNNERS”公布</p>
		</a>
	</div>
</nav>



			</div>
			<aside class="sidebar">
<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/n/cnbeta/997497/">FDA制定批准新冠疫苗的标准 福奇称对一些州病例增加感到担忧</a></li>
			<li class="widget__item"><a class="widget__link" href="/n/cnbeta/997499/">马自达MX-5 Miata 100周年纪念版即将在北美上市</a></li>
			<li class="widget__item"><a class="widget__link" href="/n/cnbeta/997495/">宇宙中最庞大的恒星之一可能已经消失了</a></li>
			<li class="widget__item"><a class="widget__link" href="/n/cnbeta/997489/">康希诺新冠疫苗军队特需药品批件：安全性良好</a></li>
			<li class="widget__item"><a class="widget__link" href="/n/cnbeta/997491/">Facebook同意第三方审计其仇恨言论控制 安抚广告主</a></li>
		</ul>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 罩妖塔.
			
		</div>
	</div>
</footer>

	</div>
<script async defer src="/n/js/menu.js"></script>
</body>
</html>
